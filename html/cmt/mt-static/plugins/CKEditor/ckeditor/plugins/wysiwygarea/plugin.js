(function(){var a={table:1,pre:1},b=/\s*<(p|div|address|h\d|center)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\1>)?\s*(?=$|<\/body>)/gi;function c(m){if(this.mode=='wysiwyg'){this.focus();this.fire('saveSnapshot');var n=this.getSelection(),o=m.data;if(this.dataProcessor)o=this.dataProcessor.toHtml(o);if(CKEDITOR.env.ie){var p=n.isLocked;if(p)n.unlock();var q=n.getNative();if(q.type=='Control')q.clear();q.createRange().pasteHTML(o);if(p)this.getSelection().lock();}else this.document.$.execCommand('inserthtml',false,o);CKEDITOR.tools.setTimeout(function(){this.fire('saveSnapshot');},0,this);}};function d(m){if(this.mode=='wysiwyg'){this.focus();this.fire('saveSnapshot');var n=m.data,o=n.getName(),p=CKEDITOR.dtd.$block[o],q=this.getSelection(),r=q.getRanges(),s=q.isLocked;if(s)q.unlock();var t,u,v,w;for(var x=r.length-1;x>=0;x--){t=r[x];t.deleteContents();u=!x&&n||n.clone(true);var y,z;if(p)while((y=t.getCommonAncestor(false,true))&&(z=CKEDITOR.dtd[y.getName()])&&!(z&&z[o])){if(y.getName() in CKEDITOR.dtd.span)t.splitElement(y);else if(t.checkStartOfBlock()&&t.checkEndOfBlock()){t.setStartBefore(y);t.collapse(true);y.remove();}else t.splitBlock();}t.insertNode(u);if(!v)v=u;}t.moveToPosition(v,CKEDITOR.POSITION_AFTER_END);var A=v.getNextSourceNode(true);if(A&&A.type==CKEDITOR.NODE_ELEMENT)t.moveToElementEditStart(A);q.selectRanges([t]);if(s)this.getSelection().lock();CKEDITOR.tools.setTimeout(function(){this.fire('saveSnapshot');},0,this);}};function e(m){if(!m.checkDirty())setTimeout(function(){m.resetDirty();});};var f=CKEDITOR.dom.walker.whitespaces(true),g=CKEDITOR.dom.walker.bookmark(false,true);function h(m){return f(m)&&g(m);};function i(m){return m.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(m.getText()).match(/^(?:&nbsp;|\xa0)$/);};function j(m){if(m.isLocked){m.unlock();setTimeout(function(){m.lock();},0);}};function k(m){return m.getOuterHtml().match(b);};f=CKEDITOR.dom.walker.whitespaces(true);function l(m){var n=m.editor,o=m.data.path,p=o.blockLimit,q=m.data.selection,r=q.getRanges()[0],s=n.document.getBody(),t=n.config.enterMode;if(t!=CKEDITOR.ENTER_BR&&r.collapsed&&p.getName()=='body'&&!o.block){n.fire('updateSnapshot');e(n);CKEDITOR.env.ie&&j(q);var u=r.fixBlock(true,n.config.enterMode==CKEDITOR.ENTER_DIV?'div':'p');if(CKEDITOR.env.ie){var v=u.getFirst(h);v&&i(v)&&v.remove();}if(k(u)){var w=u.getPrevious(f),x=u.getNext(f);if(w&&w.getName&&!(w.getName() in a)&&k(w)&&r.moveToElementEditStart(w)||x&&x.getName&&!(x.getName() in a)&&k(x)&&r.moveToElementEditStart(x))u.remove();
}r.select();if(!CKEDITOR.env.ie)n.selectionChange();}var y=new CKEDITOR.dom.range(n.document),z=new CKEDITOR.dom.walker(y);y.selectNodeContents(s);z.evaluator=function(B){return B.type==CKEDITOR.NODE_ELEMENT&&B.getName() in a;};z.guard=function(B,C){return!(B.type==CKEDITOR.NODE_TEXT&&f(B)||C);};if(z.previous()){n.fire('updateSnapshot');e(n);CKEDITOR.env.ie&&j(q);var A;if(t!=CKEDITOR.ENTER_BR)A=s.append(new CKEDITOR.dom.element(t==CKEDITOR.ENTER_P?'p':'div'));else A=s;if(!CKEDITOR.env.ie)A.appendBogus();}};CKEDITOR.plugins.add('wysiwygarea',{requires:['editingblock'],init:function(m){var n=m.config.enterMode!=CKEDITOR.ENTER_BR?m.config.enterMode==CKEDITOR.ENTER_DIV?'div':'p':false,o=m.lang.editorTitle.replace('%1',m.name),p;m.on('editingBlockReady',function(){var v,w,x,y,z,A,B=CKEDITOR.env.isCustomDomain(),C=function(F){if(w)w.remove();var G='document.open();'+(B?'document.domain="'+document.domain+'";':'')+'document.close();';w=CKEDITOR.dom.element.createFromHtml('<iframe style="width:100%;height:100%" frameBorder="0" title="'+o+'"'+' src="'+(CKEDITOR.env.ie?'javascript:void(function(){'+encodeURIComponent(G)+'}())':'')+'"'+' tabIndex="'+(CKEDITOR.env.webkit?-1:m.tabIndex)+'"'+' allowTransparency="true"'+'></iframe>');w.on('load',function(H){z=1;H.removeListener();var I=w.getFrameDocument().$;I.open('text/html','replace');I.write(F);I.close();});v.append(w);};p=CKEDITOR.tools.addFunction(E);var D='<script id="cke_actscrpt" type="text/javascript" cke_temp="1">'+(B?'document.domain="'+document.domain+'";':'')+'window.parent.CKEDITOR.tools.callFunction( '+p+', window );'+'</script>';function E(F){if(!z)return;z=0;m.fire('ariaWidget',w);var G=F.document,H=G.body,I=G.getElementById('cke_actscrpt');I.parentNode.removeChild(I);H.spellcheck=!m.config.disableNativeSpellChecker;if(CKEDITOR.env.ie){H.hideFocus=true;H.disabled=true;H.contentEditable=true;H.removeAttribute('disabled');}else setTimeout(function(){if(CKEDITOR.env.gecko&&CKEDITOR.env.version>=10900||CKEDITOR.env.opera)G.$.body.contentEditable=true;else if(CKEDITOR.env.webkit)G.$.body.parentNode.contentEditable=true;else G.$.designMode='on';},0);if(CKEDITOR.env.gecko&&!H.childNodes.length)setTimeout(function(){e(m);var M=G.$.createEvent('KeyEvents');M.initKeyEvent('keypress',true,true,F.$,false,false,false,false,0,32);G.$.dispatchEvent(M);G.createElement('br',{attributes:{_moz_editor_bogus_node:'TRUE',_moz_dirty:''}}).replace(G.getBody().getFirst());var N=new CKEDITOR.dom.range(G);N.setStartAt(new CKEDITOR.dom.element(H),CKEDITOR.POSITION_AFTER_START);
N.select();},0);try{G.execCommand('enableObjectResizing',false,!m.config.disableObjectResizing);}catch(M){}try{G.execCommand('enableInlineTableEditing',false,!m.config.disableNativeTableHandles);}catch(N){}F=m.window=new CKEDITOR.dom.window(F);G=m.document=new CKEDITOR.dom.document(G);G.on('dblclick',function(O){var P=O.data.getTarget(),Q={element:P,dialog:''};m.fire('doubleclick',Q);Q.dialog&&m.openDialog(Q.dialog);});if(!(CKEDITOR.env.ie||CKEDITOR.env.opera))G.on('mousedown',function(O){var P=O.data.getTarget();if(P.is('img','hr','input','textarea','select'))m.getSelection().selectElement(P);});if(CKEDITOR.env.webkit){G.on('click',function(O){if(O.data.getTarget().is('input','select'))O.data.preventDefault();});G.on('mouseup',function(O){if(O.data.getTarget().is('input','textarea'))O.data.preventDefault();});}if(CKEDITOR.env.ie&&G.$.compatMode=='CSS1Compat'||CKEDITOR.env.gecko||CKEDITOR.env.opera){var J=G.getDocumentElement();J.on('mousedown',function(O){if(O.data.getTarget().equals(J)){if(CKEDITOR.env.gecko&&CKEDITOR.env.version>=10900)t();u.focus();}});}F.on('blur',function(){m.focusManager.blur();});F.on('focus',function(){var O=m.document;if(CKEDITOR.env.gecko&&CKEDITOR.env.version>=10900)t();else if(CKEDITOR.env.opera)O.getBody().focus();else if(CKEDITOR.env.webkit){var P=m.getSelection(),Q=P.getType(),R=Q!=CKEDITOR.SELECTION_NONE&&P.getRanges()[0];O.getDocumentElement().focus();R&&R.select();}m.focusManager.focus();});var K=m.keystrokeHandler;if(K)K.attach(G);if(CKEDITOR.env.ie){G.getDocumentElement().addClass(G.$.compatMode);G.on('keydown',function(O){var P=O.data.getKeystroke();if(P in {8:1,46:1}){var Q=m.getSelection(),R=Q.getSelectedElement();if(R){m.fire('saveSnapshot');var S=Q.getRanges()[0].createBookmark();R.remove();Q.selectBookmarks([S]);m.fire('saveSnapshot');O.data.preventDefault();}}});if(G.$.compatMode=='CSS1Compat'){var L={33:1,34:1};G.on('keydown',function(O){if(O.data.getKeystroke() in L)setTimeout(function(){m.getSelection().scrollIntoView();},0);});}}if(m.contextMenu)m.contextMenu.addTarget(G,m.config.browserContextMenuOnCtrl!==false);setTimeout(function(){m.fire('contentDom');if(A){m.mode='wysiwyg';m.fire('mode');A=false;}x=false;if(y){m.focus();y=false;}setTimeout(function(){m.fire('dataReady');},0);if(CKEDITOR.env.ie)setTimeout(function(){if(m.document){var O=m.document.$.body;O.runtimeStyle.marginBottom='0px';O.runtimeStyle.marginBottom='';}},1000);},0);};m.addMode('wysiwyg',{load:function(F,G,H){v=F;if(CKEDITOR.env.ie&&CKEDITOR.env.quirks)F.setStyle('position','relative');
m.mayBeDirty=true;A=true;if(H)this.loadSnapshotData(G);else this.loadData(G);},loadData:function(F){x=true;var G=m.config,H=G.fullPage,I=G.docType,J='<style type="text/css" cke_temp="1">'+m._.styles.join('\n')+'</style>';!H&&(J=CKEDITOR.tools.buildStyleHtml(m.config.contentsCss)+J);var K=G.baseHref?'<base href="'+G.baseHref+'" cke_temp="1" />':'';if(H)F=F.replace(/<!DOCTYPE[^>]*>/i,function(L){m.docType=I=L;return '';});if(m.dataProcessor)F=m.dataProcessor.toHtml(F,n);if(H){if(!/<body[\s|>]/.test(F))F='<body>'+F;if(!/<html[\s|>]/.test(F))F='<html>'+F+'</html>';if(!/<head[\s|>]/.test(F))F=F.replace(/<html[^>]*>/,'$&<head><title></title></head>');else if(!/<title[\s|>]/.test(F))F=F.replace(/<head[^>]*>/,'$&<title></title>');K&&(F=F.replace(/<head>/,'$&'+K));F=F.replace(/<\/head\s*>/,J+'$&');F=I+F;}else F=G.docType+'<html dir="'+G.contentsLangDirection+'"'+' lang="'+(G.contentsLanguage||m.langCode)+'">'+'<head>'+'<title>'+o+'</title>'+K+J+'</head>'+'<body'+(G.bodyId?' id="'+G.bodyId+'"':'')+(G.bodyClass?' class="'+G.bodyClass+'"':'')+'>'+F+'</html>';F+=D;this.onDispose();C(F);},getData:function(){var F=m.config,G=F.fullPage,H=G&&m.docType,I=w.getFrameDocument(),J=G?I.getDocumentElement().getOuterHtml():I.getBody().getHtml();if(m.dataProcessor)J=m.dataProcessor.toDataFormat(J,n);if(F.ignoreEmptyParagraph)J=J.replace(b,'');if(H)J=H+'\n'+J;return J;},getSnapshotData:function(){return w.getFrameDocument().getBody().getHtml();},loadSnapshotData:function(F){w.getFrameDocument().getBody().setHtml(F);},onDispose:function(){if(!m.document)return;m.document.getDocumentElement().clearCustomData();m.document.getBody().clearCustomData();m.window.clearCustomData();m.document.clearCustomData();w.clearCustomData();},unload:function(F){this.onDispose();m.window=m.document=w=v=y=null;m.fire('contentDomUnload');},focus:function(){if(x)y=true;else if(m.window){m.window.focus();m.selectionChange();}}});m.on('insertHtml',c,null,null,20);m.on('insertElement',d,null,null,20);m.on('selectionChange',l,null,null,1);});var q;m.on('contentDom',function(){var v=m.document.getElementsByTag('title').getItem(0);v.setAttribute('_cke_title',m.document.$.title);m.document.$.title=o;});if(CKEDITOR.env.ie8Compat){m.addCss('html.CSS1Compat [contenteditable=false]{ min-height:0 !important;}');var r=[];for(var s in CKEDITOR.dtd.$removeEmpty)r.push('html.CSS1Compat '+s+'[contenteditable=false]');m.addCss(r.join(',')+'{ display:inline-block;}');}function t(v){CKEDITOR.tools.tryThese(function(){m.document.$.designMode='on';
setTimeout(function(){m.document.$.designMode='off';m.document.getBody().focus();},50);},function(){m.document.$.designMode='off';var w=m.document.getBody();w.setAttribute('contentEditable',false);w.setAttribute('contentEditable',true);!v&&t(1);});};if(CKEDITOR.env.gecko||CKEDITOR.env.ie||CKEDITOR.env.opera){var u;m.on('uiReady',function(){u=m.container.append(CKEDITOR.dom.element.createFromHtml('<span tabindex="-1" style="position:absolute; left:-10000" role="presentation"></span>'));u.on('focus',function(){m.focus();});});m.on('destroy',function(){CKEDITOR.tools.removeFunction(p);u.clearCustomData();});}m.on('insertElement',function(v){var w=v.data;if(w.type=CKEDITOR.NODE_ELEMENT&&(w.is('input')||w.is('textarea')))w.setAttribute('contentEditable',false);});}});if(CKEDITOR.env.gecko)(function(){var m=document.body;if(!m)window.addEventListener('load',arguments.callee,false);else{var n=m.getAttribute('onpageshow');m.setAttribute('onpageshow',(n?n+';':'')+'event.persisted && (function(){'+'var allInstances = CKEDITOR.instances, editor, doc;'+'for ( var i in allInstances )'+'{'+'\teditor = allInstances[ i ];'+'\tdoc = editor.document;'+'\tif ( doc )'+'\t{'+'\t\tdoc.$.designMode = "off";'+'\t\tdoc.$.designMode = "on";'+'\t}'+'}'+'})();');}})();})();CKEDITOR.config.disableObjectResizing=false;CKEDITOR.config.disableNativeTableHandles=true;CKEDITOR.config.disableNativeSpellChecker=true;CKEDITOR.config.ignoreEmptyParagraph=true;
