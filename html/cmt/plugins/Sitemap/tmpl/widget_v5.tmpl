<mt:setvarblock name="html_head" append="1">
<!-- Generated by <TMPL_VAR NAME=ENVELOPE> under MIT LIcense -->
<script type="text/javascript" src="<$mt:var name="static_uri"$><TMPL_VAR NAME=ENVELOPE>/jquery.cookie.js"></script>

<style>
#tree_html {
    padding-bottom: 30px;
}

#tree_html ul {
    padding: 0px;
    margin: 0px;
}

#tree_html ul li {
    padding: 0px;
    margin: 0px;
    position:relative;
}

#tree_html a {
    color: #333; text-decoration: none;
    line-height: 1.8;
}

#tree_html a:hover {
    color: #666; text-decoration: underline;
}

#tree_html span.loading {
    display:block;
    padding:2px 0px 6px 45px;
}


#tree_html span.website-label {
    position:relative;
    top:-4px;
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/sitemap_website.gif') no-repeat left top;
    padding:0px 0px 20px 40px;
    display: inline;
}

#tree_html li.root span.blog-label {
    position:relative;
    top:-4px;
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/sitemap_blog_root.gif') no-repeat left top;
    padding:0px 0px 20px 55px;
    display: inline;
}

#tree_html li.child span.blog-label {
    position:relative;
    top:-4px;
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/sitemap_blog.gif') no-repeat left top;
    padding:0px 0px 20px 55px;
    display: inline;
}

#tree_html ul li ul {
    padding-left:18px;
}

#tree_html ul li.website div.item {
    position: relative;
    /height:3em;
    line-height:1.2em;
    padding: 0px 0px 2px;
    clear:both;
}

#tree_html ul li.website div.root {
	height:3em;
}

#tree_html ul li.blog div.root {
	height:3em;
}

#tree_html ul li.blog div.item {
    position: relative;
    padding:2px 0px;
    /height:3em;
}

#tree_html ul li.category div.item,
#tree_html ul li.folder div.item,
#tree_html ul li.entry div.item,
#tree_html ul li.page div.item {
    position:static;
    padding:2px 0px;
    /height:1.8em;
}

#tree_html span.website-label,
#tree_html span.blog-label,
#tree_html span.category-label,
#tree_html span.folder-label {
    font-weight: bold;
    margin-bottom: 5px;
}

#tree_html span.url {
    position: absolute;
    top: 17px;
    left:40px;
    color: #093;
    font-weight: normal;
    font-size: 12px;
}

#tree_html span.url a {
    color: #093; text-decoration: none;
}

#tree_html span.website-label span.url {
    top: 15px;
}

#tree_html span.website-label,
#tree_html span.website-label a {
    line-height:1.2em;
}

#tree_html span.website-label a {
    line-height: 1.8;
}

#tree_html span.url a:hover {
    color: #093; text-decoration: underline;
}

#tree_html span.path {
    color: #999; text-decoration: none;
}

#tree_html li.website span.url {
    top:15px;
}

#tree_html li.blog span.url {
    top: 17px;
    left:55px;
}

#tree_html li.folder.link span.folder-label {
    background:transparent url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/sitemap_folder_link.gif') no-repeat left 3px;
    padding:3px 0px 5px 45px;
}

#tree_html li.category.link span.category-label {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/sitemap_category_link.gif') no-repeat left 3px;
    padding:3px 0px 5px 45px;
}

#tree_html li.folder.open span.folder-label {
    background:transparent url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/sitemap_folder_open.gif') no-repeat left 0px;
    padding: 7px 0px 5px 45px;
}

#tree_html li.category.open span.category-label {
    background:transparent url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/sitemap_category_open.gif') no-repeat left 0px;
    padding: 7px 0px 5px 45px;
}

#tree_html li.folder.close span.folder-label {
    background:transparent url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/sitemap_folder_close.gif') no-repeat left 0px;
    padding:4px 0px 5px 45px;
}

#tree_html li.category.close span.category-label {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/sitemap_category_close.gif') no-repeat left 0px;
    padding:4px 0px 5px 45px;
}



#tree_html li.website.open ul li.folder.open,
#tree_html li.website.open ul li.category.open {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/sitemap_dot.gif') repeat-y 30px top;
}

#tree_html li.blog.open ul li.folder.open,
#tree_html li.blog.open ul li.category.open {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/sitemap_dot.gif') repeat-y 30px top;
}

#tree_html li.website.open {
    background:url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/sitemap_dot.gif') repeat-y 16px top;
}

#tree_html li.website.open li.blog.open {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/sitemap_dot.gif') repeat-y 30px top;
}

#tree_html li.website.close {
    padding-bottom:10px;
}

#tree_html li.blog {
    background:url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/sitemap_dot.gif') repeat-y 30px top;
    padding-bottom:10px;
}

#tree_html li.blog.close {
    background:none;
}

#tree_html li.website.open div ul {
    padding-left:18px;
}
#tree_html li.website.open div ul:last-child {
    padding-bottom: 10px;
}

#tree_html li.website.open ul li.folder.open div ul,
#tree_html li.website.open ul li.category.open div ul,
#tree_html li.website.open ul li.blog.open div ul {
    padding-left:33px;
}

#tree_html li.open div ul.page,
#tree_html li.website.open ul li.open div ul.page {
    margin: 3px 0 10px 42px;
    padding: 3px 7px 1px 7px;
    border: 1px solid #ffe56b;
    background-color: #fefff6;
    -moz-border-radius-bottomleft:2px;
    -moz-border-radius-bottomright:2px;
    -moz-border-radius-topleft:2px;
    -moz-border-radius-topright:2px;
}

#tree_html li.open div ul.entry,
#tree_html li.website.open ul li.open div ul.entry {
    margin: 3px 0 10px 42px;
    padding: 3px 7px 1px 7px;
    border: 1px solid #b3ddff;
    background-color: #f9fdff;
    -moz-border-radius-bottomleft:2px;
    -moz-border-radius-bottomright:2px;
    -moz-border-radius-topleft:2px;
    -moz-border-radius-topright:2px;
}

#tree_html li.page.hold,
#tree_html li.entry.hold {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/draft.gif') no-repeat left 4px;
    padding-left: 20px;
}

#tree_html li.page.release,
#tree_html li.entry.release {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/published.gif') no-repeat left 4px;
    padding-left: 20px;
}

#tree_html li.page.review,
#tree_html li.entry.review,
#tree_html li.page.null,
#tree_html li.entry.null {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/pended.gif') no-repeat left 4px;
    padding-left: 20px;
}

#tree_html li.page.future,
#tree_html li.entry.future {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/time.gif') no-repeat left 4px;
    padding-left: 20px;
}

#tree_html li.more {
    padding-bottom:3px;
}

#tree_html div.menu {
    z-index:9999;
    display: none;
    position:absolute;
    top:2px;
    /*line-height:1.2em;*/
    line-height:2.4em;
    font-weight: normal;
    font-size: 10px;
    margin-left: 5px;
    padding:4px;
    border: solid 1px #ccc;
    background-color: #efefef;
    -moz-border-radius-bottomleft:3px;
    -moz-border-radius-bottomright:3px;
    -moz-border-radius-topleft:3px;
    -moz-border-radius-topright:3px;
}

#tree_html div.menu a {
    white-space:nowrap;
    margin-right:5px;
    padding:2px 0px 3px 20px;
    _float:left;
}

#tree_html div.menu a.post-page {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/create.gif') no-repeat left top;
}

#tree_html div.menu a.post-entry {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/create.gif') no-repeat left top;
}

#tree_html div.menu a.move {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/move.gif') no-repeat left top;
}

#tree_html div.menu a.template {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/template.gif') no-repeat left top;
}

#tree_html div.menu a.rebuild {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/rebuild.gif') no-repeat left top;
}

#tree_html div.menu a.config {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/config.gif') no-repeat left top;
}

#tree_html div.menu a.list {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/list.gif') no-repeat left top;
}

#tree_html div.menu a.view {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/view.gif') no-repeat left top;
}

#tree_html div.menu a.edit {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/edit.gif') no-repeat left top;
}

#tree_html div.menu a.folder {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/folder.gif') no-repeat left top;
}

/*add 20101102*/
#tree_html div.menu a.folder_add {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/folder_add.gif') no-repeat left top;
}

/*add 20101102*/
#tree_html div.menu a.folder_del {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/folder_del.gif') no-repeat left top;
}

#tree_html div.menu a.category {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/category.gif') no-repeat left top;
}

#tree_html div.menu a.category_add {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/category_add.gif') no-repeat left top;
}

#tree_html div.menu a.category_del {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/category_del.gif') no-repeat left top;
}

#tree_html div.menu a.asset {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/assets.gif') no-repeat left top;
}

#tree_html div.menu a.upload {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/upload.gif') no-repeat left top;
}

#tree_html div.menu a.plugin {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/plugin.gif') no-repeat left top;
}

#tree_html div.menu a.log {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/log.gif') no-repeat left top;
}

#tree_html div.menu span.path {
    background: url('<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/path.gif') no-repeat left top;
    padding:2px 0px 3px 20px;
}

#tree_html p.empty {
    padding: 1px;
    margin: 0 0 10px 50px;
    color: #ccc;
}

#tree_html ul li.blog ul {
    padding-left:33px;
}

#tree_html .items ul li {
    position: static !important;
}
#tree_html ul {
	_zoom:1 !important;
}
#tree_html li {
	_zoom:1 !important;
}

/* add 20101125 */
#tree_html div.item div.menu {
    /top: 0px;
    /line-height:2.4em;
    /font-size: 9px;
    /padding:2px;
}

#tree_html ul li.website div.item {
    /height: 3.8em;
}
#tree_html ul li.blog div.item {
    /height: 4.8em;
}

#tree_html ul li.category div.item {
    /height: 3.8em;
}
#tree_html ul li.folder div.item{
    /height: 4.8em;
}

#tree_html ul li.entry div.item,
#tree_html ul li.page div.item{
    /height: 2.8em;
}

/* add 20110109 */
#tree_html .debug {
	font-size:80%; color:#888;
}

/* add 20110109 */
#tree_html div.menu span.rv {
    padding:2px 0px 3px 20px;
    color:#999;
    _float:left;
}
</style>
</mt:setvarblock>

<mt:if name="location" eq="website">
    <mtapp:widget class="sitemap-widget" label="<__trans phrase="Website Overviewing">" can_close="1">
    <div id="tree_html"><TMPL_VAR NAME=TREE_HTML></div>
    </mtapp:widget>
<mt:elseif name="location" eq="blog"> 
    <mtapp:widget class="sitemap-widget" label="<__trans phrase="Blog Overviewing">" can_close="1">
    <div id="tree_html"><TMPL_VAR NAME=TREE_HTML></div>
    </mtapp:widget>
<mt:else>
    <mtapp:widget class="sitemap-widget" label="<__trans phrase="All Sitemap Overviewing">" can_close="1">
    <div id="tree_html"><TMPL_VAR NAME=TREE_HTML></div>
    </mtapp:widget>
</mt:if>

<div style="display: none">
    <img src="<TMPL_VAR NAME=STATIC_URI>images/ani-rebuild.gif" />
    <img src="<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/sitemap_website.gif" />
    <img src="<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/sitemap_blog.gif" />
    <img src="<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/sitemap_folder_open.gif" />
    <img src="<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/sitemap_folder_close.gif" />
    <img src="<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/sitemap_category_open.gif" />
    <img src="<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/sitemap_category_close.gif" />
    <img src="<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/draft.gif" />
    <img src="<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/published.gif" />
    <img src="<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/pended.gif" />
    <img src="<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/time.gif" />
    <img src="<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/create.gif" />
    <img src="<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/template.gif" />
    <img src="<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/rebuild.gif" />
    <img src="<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/config.gif" />
    <img src="<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/list.gif" />
    <img src="<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/view.gif" />
    <img src="<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/edit.gif" />
    <img src="<TMPL_VAR NAME=STATIC_URI><TMPL_VAR NAME=ENVELOPE>/path.gif" />
</div>

<script type="text/javascript">
function openCategory ($bid, $cid) {
    var name = 'sm_b' + $bid + '_c' + $cid;
    var e = jQuery('#' + name);
    if (!e) return;
    if (e.html() === '') {
        e.html ('<span class="loading"><img src="<TMPL_VAR NAME=STATIC_URI>images/ani-rebuild.gif" /><__trans phrase="Loading..."></span>');
        jQuery.get('?__mode=sitemap_open&amp;bid='+$bid+'&amp;cid='+$cid, function (data) {
            e.html(data);
            setupHover ();
        });
    }
    e.toggle ();
    !e.parent('li').hasClass('link')
        && e.parent('li').toggleClass('open').toggleClass('close');
    jQuery.cookie (name, e.parent('li').hasClass('open') ? 1 : 0, { expires: 90 });
}

function setupHover () {
    jQuery('#tree_html div.item').hover(
        // When mouseover
        function () {
            jQuery(this).children('.menu').eq(0).css('display', 'inline');
        },
        // When mouseout
        function () {
            jQuery(this).children('.menu').eq(0).hide();
        });
}

jQuery(document).ready(function () {
    // Mouse hover toggles div.menu element
        setupHover ();
});
</script>